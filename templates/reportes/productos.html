{% extends "base.html" %}

{% block title %}Reporte de Productos{% endblock %}

{% block content %}
<h1>Reporte de operaciones por producto</h1>

<form method="get" action="">
    <label for="producto">Selecciona un producto:</label>
    <select name="producto" id="producto">
        <option value="">-- Todos --</option>
        {% for p in productos %}
            <option value="{{ p.id }}" {% if producto_seleccionado == p.id %}selected{% endif %}>
                {{ p.nombre }}
            </option>
        {% endfor %}
    </select>
    <button type="submit">Filtrar</button>
</form>

<table border="1" cellspacing="0" cellpadding="5" style="margin-top: 20px;">
    <thead>
        <tr>
            <th>Producto</th>
            <th>Total de operaciones (cantidad)</th>
        </tr>
    </thead>
    <tbody>
        {% for producto in operaciones %}
        <tr>
            <td>{{ producto.producto__nombre }}</td>
            <td>{{ producto.total }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="2">No hay operaciones para este producto.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
